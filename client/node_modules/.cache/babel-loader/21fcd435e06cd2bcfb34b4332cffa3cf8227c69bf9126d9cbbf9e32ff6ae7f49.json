{"ast":null,"code":"import _toConsumableArray from\"/Users/Inspater/Desktop/react_proj/postly/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/Users/Inspater/Desktop/react_proj/postly/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/Inspater/Desktop/react_proj/postly/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/Inspater/Desktop/react_proj/postly/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import Post from\"./Post\";import{TextField,Button,Typography,Box}from\"@mui/material\";import Container from'@mui/material/Container';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Posts(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),newTitle=_useState4[0],setNewTitle=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),newContent=_useState6[0],setNewContent=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),newAuthor=_useState8[0],setNewAuthor=_useState8[1];var fetchPosts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/posts\");case 2:response=_context.sent;_context.next=5;return response.json();case 5:data=_context.sent;setPosts(data);case 7:case\"end\":return _context.stop();}},_callee);}));return function fetchPosts(){return _ref.apply(this,arguments);};}();var createPost=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){var response,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:e.preventDefault();_context2.next=3;return fetch(\"/posts\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({title:newTitle,content:newContent,author:newAuthor})});case 3:response=_context2.sent;_context2.next=6;return response.json();case 6:data=_context2.sent;setPosts([data].concat(_toConsumableArray(posts)));setNewTitle(\"\");setNewContent(\"\");setNewAuthor(\"\");case 11:case\"end\":return _context2.stop();}},_callee2);}));return function createPost(_x){return _ref2.apply(this,arguments);};}();var updatePost=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(id,title,content,author){var response,data;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetch(\"/posts/\".concat(id),{method:\"PUT\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({title:title,content:content,author:author})});case 2:response=_context3.sent;_context3.next=5;return response.json();case 5:data=_context3.sent;setPosts(posts.map(function(post){return post._id===id?data:post;}));case 7:case\"end\":return _context3.stop();}},_callee3);}));return function updatePost(_x2,_x3,_x4,_x5){return _ref3.apply(this,arguments);};}();var deletePost=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(id){var response;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.next=2;return fetch(\"/posts/\".concat(id),{method:\"DELETE\"});case 2:response=_context4.sent;if(response.ok){setPosts(posts.filter(function(post){return post._id!==id;}));}case 4:case\"end\":return _context4.stop();}},_callee4);}));return function deletePost(_x6){return _ref4.apply(this,arguments);};}();useEffect(function(){fetchPosts();},[]);return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",align:\"center\",gutterBottom:true,children:\"Posts\"}),/*#__PURE__*/_jsxs(Box,{component:\"form\",onSubmit:createPost,sx:{mb:4},children:[/*#__PURE__*/_jsx(TextField,{label:\"Author\",type:\"text\",value:newAuthor,onChange:function onChange(e){return setNewAuthor(e.target.value);},fullWidth:true,variant:\"outlined\",required:true,sx:{mb:2}}),/*#__PURE__*/_jsx(TextField,{label:\"Title\",type:\"text\",value:newTitle,onChange:function onChange(e){return setNewTitle(e.target.value);},fullWidth:true,variant:\"outlined\",required:true,sx:{mb:2}}),/*#__PURE__*/_jsx(TextField,{label:\"Content\",value:newContent,onChange:function onChange(e){return setNewContent(e.target.value);},fullWidth:true,variant:\"outlined\",required:true,sx:{mb:2}}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",children:\"Add New Post\"})]}),posts.map(function(post){return/*#__PURE__*/_jsx(Post,{post:post,editPost:updatePost,deletePost:deletePost},post._id);})]});}export default Posts;","map":{"version":3,"names":["React","useEffect","useState","Post","TextField","Button","Typography","Box","Container","jsx","_jsx","jsxs","_jsxs","Posts","_useState","_useState2","_slicedToArray","posts","setPosts","_useState3","_useState4","newTitle","setNewTitle","_useState5","_useState6","newContent","setNewContent","_useState7","_useState8","newAuthor","setNewAuthor","fetchPosts","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","data","wrap","_callee$","_context","prev","next","fetch","sent","json","stop","apply","arguments","createPost","_ref2","_callee2","e","_callee2$","_context2","preventDefault","method","headers","body","JSON","stringify","title","content","author","concat","_toConsumableArray","_x","updatePost","_ref3","_callee3","id","_callee3$","_context3","map","post","_id","_x2","_x3","_x4","_x5","deletePost","_ref4","_callee4","_callee4$","_context4","ok","filter","_x6","children","variant","align","gutterBottom","component","onSubmit","sx","mb","label","type","value","onChange","target","fullWidth","required","editPost"],"sources":["/Users/Inspater/Desktop/react_proj/postly/client/src/components/Posts.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport Post from \"./Post\";\nimport { TextField, Button, Typography, Box } from \"@mui/material\";\nimport Container from '@mui/material/Container';\n\nfunction Posts() {\n  const [posts, setPosts] = useState([]);\n  const [newTitle, setNewTitle] = useState(\"\");\n  const [newContent, setNewContent] = useState(\"\");\n  const [newAuthor, setNewAuthor] = useState(\"\");\n\n  const fetchPosts = async () => {\n    const response = await fetch(\"/posts\");\n    const data = await response.json();\n    setPosts(data);\n  };\n\n  const createPost = async (e) => {\n    e.preventDefault();\n    const response = await fetch(\"/posts\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ title: newTitle, content: newContent, author: newAuthor }),\n    });\n    const data = await response.json();\n    setPosts([data, ...posts]);\n    setNewTitle(\"\");\n    setNewContent(\"\");\n    setNewAuthor(\"\");\n  };\n\n  const updatePost = async (id, title, content, author) => {\n    const response = await fetch(`/posts/${id}`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ title, content, author }),\n    });\n    const data = await response.json();\n    setPosts(posts.map((post) => (post._id === id ? data : post)));\n  };\n\n  const deletePost = async (id) => {\n    const response = await fetch(`/posts/${id}`, {\n      method: \"DELETE\",\n    });\n    if (response.ok) {\n      setPosts(posts.filter((post) => post._id !== id));\n    }\n  };\n\n  useEffect(() => {\n    fetchPosts();\n  }, []);\n\n  return (\n    <Container>\n      <Typography variant=\"h4\" align=\"center\" gutterBottom>Posts</Typography>\n      <Box component=\"form\" onSubmit={createPost} sx={{ mb: 4 }}>\n        <TextField\n          label=\"Author\"\n          type=\"text\"\n          value={newAuthor}\n          onChange={(e) => setNewAuthor(e.target.value)}\n          fullWidth\n          variant=\"outlined\"\n          required\n          sx={{ mb: 2 }}\n        />\n        <TextField\n          label=\"Title\"\n          type=\"text\"\n          value={newTitle}\n          onChange={(e) => setNewTitle(e.target.value)}\n          fullWidth\n          variant=\"outlined\"\n          required\n          sx={{ mb: 2 }}\n        />\n        <TextField\n          label=\"Content\"\n          value={newContent}\n          onChange={(e) => setNewContent(e.target.value)}\n          fullWidth\n          variant=\"outlined\"\n          required\n          sx={{ mb: 2 }}\n        />\n        <Button type=\"submit\" variant=\"contained\">Add New Post</Button>\n      </Box>\n      {posts.map((post) => (\n        <Post key={post._id} post={post} editPost={updatePost} deletePost={deletePost} />\n      ))}\n    </Container>\n  );\n}\n\nexport default Posts;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}